# 面试题目
```
1. 谈一谈c10k问题。
```

上一篇我们熟悉了如何在PHP中使用socket，并且实现了简单的服务器，这一节我们将关注socket编程的性能问题。

socket是网络层的底层核心内容，也是TCP/IP以及UDP底层协议的实现通道。随着互联网信息时代的爆炸式发展，当代服务器的性能问题面临越来越大的挑战，著名的[C10K 问题]（http://www.kegel.com/c10k.html）也随之出现。

> 谈一谈c10k问题

C10K问题具体说就是服务器如何处理10k个客户端的并发连接。到了web2.0之后，用户数增长快速，应用程序也变得更加复杂，从原来简单的表单提交，到现在的即时通讯和在线实时互动，而每一个用户都必须和服务器保持TCP连接才能进行实时的数据交互。这时候如何提高单个服务器的并发连接成为了非常重要的事情。如果不提高并发连接数，只能通过增加服务器数目来解决问题，这个成本对于Facebook这样的网站将是非常巨大的。

为了解决C10k问题，有很多解决方案被提出来。FreeBSD提出了kqueue，Linux退出了epoll，windows退出了IOCP。因为Linux是互联网企业中使用率最高的操作系统，Epoll就成为C10K killer、高并发、高性能、异步非阻塞这些技术的代名词了。为了理解这个问题，我们需要首先理解一些概念。

# 阻塞、同步、多路复用

1、阻塞/非阻塞：这两个概念是针对 IO 过程中进程的状态来说的，阻塞 IO 是指调用结果返回之前，当前线程会被挂起；相反，非阻塞指在不能立刻得到结果之前，该函数不会阻塞当前线程，而会立刻返回。

2、同步/异步：这两个概念是针对调用如果返回结果来说的，所谓同步，就是在发出一个功能调用时，在没有得到结果之前，该调用就不返回；相反，当一个异步过程调用发出后，调用者不能立刻得到结果，实际处理这个调用的部件在完成后，通过状态、通知和回调来通知调用者。

3、多路复用（IO/Multiplexing）：为了提高数据信息在网络通信线路中传输的效率，在一条物理通信线路上建立多条逻辑通信信道，同时传输若干路信号的技术就叫做多路复用技术。对于 Socket 来说，应该说能同时处理多个连接的模型都应该被称为多路复用，目前比较常用的有 select/poll/epoll/kqueue 这些 IO 模型（目前也有像 Apache 这种每个连接用单独的进程/线程来处理的 IO 模型，但是效率相对比较差，也很容易出问题，所以暂时不做介绍了）。在这些多路复用的模式中，异步阻塞/非阻塞模式的扩展性和性能最好。
